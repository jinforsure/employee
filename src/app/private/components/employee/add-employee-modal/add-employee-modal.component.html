<div class="modal-dialog">
  <div class="modal-content">
    <form #employeeForm="ngForm">
      <div class="modal-header">
        <h4 class="modal-title">{{employee.id ? "Edit" : "Add"}} Employee</h4>
        <button type="button" class="normal-close-button" aria-label="Close" (click)="closeDialog()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>     
      <div class="modal-body">
        <div class="row" *ngIf="!employee.id">
          <div>
            <label>Username</label>
            <input type="text" [(ngModel)]="employee.username" name="username" class="form-control" required />
            <div *ngIf="employeeForm.controls['username']?.invalid && employeeForm.controls['username']?.touched" class="text-danger">
              Username is required.
            </div>
          </div>
        </div>
        <div class="row" *ngIf="!employee.id">
          <div class="col">
            <label>First Name</label>
            <input type="text" [(ngModel)]="employee.firstName" name="firstName" class="form-control" required />
            <div *ngIf="employeeForm.controls['firstName']?.invalid && employeeForm.controls['firstName']?.touched" class="text-danger">
              First Name is required.
            </div>
          </div>
          <div class="col">
            <label>Last Name</label>
            <input type="text" [(ngModel)]="employee.lastName" name="lastName" class="form-control" required />
            <div *ngIf="employeeForm.controls['lastName']?.invalid && employeeForm.controls['lastName']?.touched" class="text-danger">
              Last Name is required.
            </div>
          </div>
        </div>
        <div class="row" *ngIf="!employee.id">
          <div class="col">
            <label>Phone Number</label>
            <input type="number" [(ngModel)]="employee.phoneNumber" name="phoneNumber" class="form-control" required 
                   pattern="[0-9]{8}" title="Phone number must be 8 digits long"/>
            <div *ngIf="employeeForm.controls['phoneNumber']?.errors && employeeForm.controls['phoneNumber']?.touched" 
                 class="text-danger">
              Phone Number is required and must be 8 digits long.
            </div>
          </div>
          <div class="col">
            <label>Address</label>
            <input type="text" [(ngModel)]="employee.address" name="address" class="form-control" required />
            <div *ngIf="employeeForm.controls['address']?.invalid && employeeForm.controls['address']?.touched" class="text-danger">
              Address is required.
            </div>
          </div>
        </div>
        <div class="row" *ngIf="!employee.id">
          <div class="col">
            <label>Email</label>
            <input type="email" [(ngModel)]="employee.email" name="email" class="form-control" required email />
            <div *ngIf="employeeForm.controls['email']?.invalid && employeeForm.controls['email']?.touched" class="text-danger">
              Valid Email is required.
            </div>
          </div>
          <div class="col">
            <label>Password</label>
            <input type="password" [(ngModel)]="employee.password" name="password" class="form-control" required />
            <div *ngIf="employeeForm.controls['password']?.invalid && employeeForm.controls['password']?.touched" class="text-danger">
              Password is required.
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label>Account Type</label>
            <select id="account_type" [(ngModel)]="employee.account_type" name="account_type" required>
              <option value="" disabled selected>Select Account Type</option>
              <option *ngFor="let account_type of account_types" [value]="account_type">{{ account_type }}</option>
            </select>
            <div *ngIf="employeeForm.controls['account_type']?.invalid && employeeForm.controls['account_type']?.touched" class="text-danger">
              Account Type is required.
            </div>
          </div>
          <div class="col">
            <label>Department</label>
            <select id="department" [(ngModel)]="employee.department" name="department" required>
              <option value="" enabled selected>Select Department</option>
              <option *ngFor="let department of departments" [value]="department">{{ department }}</option>
            </select>
            <div *ngIf="employeeForm.controls['department']?.invalid && employeeForm.controls['department']?.touched" class="text-danger">
              Department is required.
            </div>
          </div>
        </div>
        <div class="row">         
          <div class="col">
            <label>Job</label>
            <input type="text" [(ngModel)]="employee.job" name="job" class="form-control" required />
            <div *ngIf="employeeForm.controls['job']?.invalid && employeeForm.controls['job']?.touched" class="text-danger">
              Job is required.
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeDialog()">Back</button>
        <input type="button" class="btn btn-success" value="Save" (click)="saveEmployee()" [disabled]="employeeForm.invalid" />
      </div>
    </form>
  </div>
</div>
